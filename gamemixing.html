<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Hub - B·ªô S∆∞u T·∫≠p Mini Games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .container {
            max-width: 800px;
            width: 90%;
            text-align: center;
        }

        .header {
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
        }

        .game-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .game-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .game-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .game-desc {
            opacity: 0.8;
            font-size: 0.9em;
        }

        .game-screen {
            display: none;
            background: rgba(0, 0, 0, 0.9);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
        }

        .game-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #ff4757;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

        .back-btn:hover {
            background: #ff3742;
        }

        canvas {
            border: 3px solid white;
            border-radius: 10px;
            background: #000;
        }

        .game-controls {
            margin-top: 20px;
        }

        .control-btn {
            background: #5dade2;
            border: none;
            color: white;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

        .control-btn:hover {
            background: #3498db;
        }

        .score {
            font-size: 1.5em;
            margin: 10px;
            color: #f1c40f;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 80px);
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .memory-card {
            width: 80px;
            height: 80px;
            background: #3498db;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            transition: all 0.3s ease;
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: #e74c3c;
        }

        .reaction-area {
            width: 300px;
            height: 300px;
            background: #e74c3c;
            margin: 20px auto;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5em;
            transition: all 0.3s ease;
        }

        .reaction-area.ready {
            background: #f39c12;
        }

        .reaction-area.go {
            background: #27ae60;
        }

        .quiz-question {
            font-size: 1.5em;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .quiz-option {
            padding: 15px;
            background: #3498db;
            border: none;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: #2980b9;
            transform: scale(1.02);
        }

        .correct {
            background: #27ae60 !important;
        }

        .wrong {
            background: #e74c3c !important;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .bounce {
            animation: bounce 1s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Game Hub</h1>
            <p>B·ªô s∆∞u t·∫≠p mini games th√∫ v·ªã - Ch·ªçn game ƒë·ªÉ b·∫Øt ƒë·∫ßu!</p>
        </div>

        <div class="games-grid">
            <div class="game-card" onclick="openGame('snake')">
                <div class="game-icon">üêç</div>
                <div class="game-title">Snake Game</div>
                <div class="game-desc">ƒêi·ªÅu khi·ªÉn con r·∫Øn ƒÉn m·ªìi v√† l·ªõn l√™n</div>
            </div>

            <div class="game-card" onclick="openGame('memory')">
                <div class="game-icon">üß†</div>
                <div class="game-title">Memory Game</div>
                <div class="game-desc">Ghi nh·ªõ v√† t√¨m c√°c c·∫∑p th·∫ª gi·ªëng nhau</div>
            </div>

            <div class="game-card" onclick="openGame('reaction')">
                <div class="game-icon">‚ö°</div>
                <div class="game-title">Reaction Test</div>
                <div class="game-desc">Ki·ªÉm tra t·ªëc ƒë·ªô ph·∫£n x·∫° c·ªßa b·∫°n</div>
            </div>

            <div class="game-card" onclick="openGame('quiz')">
                <div class="game-icon">ü§î</div>
                <div class="game-title">Quick Quiz</div>
                <div class="game-desc">Tr·∫£ l·ªùi c√¢u h·ªèi th√∫ v·ªã</div>
            </div>

            <div class="game-card" onclick="openGame('clicker')">
                <div class="game-icon">üëÜ</div>
                <div class="game-title">Cookie Clicker</div>
                <div class="game-desc">Click ƒë·ªÉ ki·∫øm ƒëi·ªÉm trong th·ªùi gian gi·ªõi h·∫°n</div>
            </div>

            <div class="game-card" onclick="openGame('math')">
                <div class="game-icon">üî¢</div>
                <div class="game-title">Math Challenge</div>
                <div class="game-desc">Gi·∫£i to√°n nhanh ƒë·ªÉ ghi ƒëi·ªÉm</div>
            </div>
        </div>
    </div>

    <!-- Snake Game -->
    <div id="snake-game" class="game-screen">
        <button class="back-btn" onclick="closeGame()">‚Üê Quay l·∫°i</button>
        <div class="game-content">
            <h2>üêç Snake Game</h2>
            <div class="score">ƒêi·ªÉm: <span id="snake-score">0</span></div>
            <canvas id="snake-canvas" width="400" height="400"></canvas>
            <div class="game-controls">
                <p>S·ª≠ d·ª•ng ph√≠m m≈©i t√™n ƒë·ªÉ ƒëi·ªÅu khi·ªÉn</p>
                <button class="control-btn" onclick="resetSnakeGame()">Ch∆°i l·∫°i</button>
            </div>
        </div>
    </div>

    <!-- Memory Game -->
    <div id="memory-game" class="game-screen">
        <button class="back-btn" onclick="closeGame()">‚Üê Quay l·∫°i</button>
        <div class="game-content">
            <h2>üß† Memory Game</h2>
            <div class="score">ƒêi·ªÉm: <span id="memory-score">0</span> | L∆∞·ª£t: <span id="memory-moves">0</span></div>
            <div id="memory-grid" class="memory-grid"></div>
            <div class="game-controls">
                <button class="control-btn" onclick="resetMemoryGame()">Ch∆°i l·∫°i</button>
            </div>
        </div>
    </div>

    <!-- Reaction Test -->
    <div id="reaction-game" class="game-screen">
        <button class="back-btn" onclick="closeGame()">‚Üê Quay l·∫°i</button>
        <div class="game-content">
            <h2>‚ö° Reaction Test</h2>
            <div class="score">Th·ªùi gian ph·∫£n x·∫°: <span id="reaction-time">-</span>ms</div>
            <div id="reaction-area" class="reaction-area" onclick="handleReactionClick()">
                Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ ch∆°i
            </div>
            <div class="game-controls">
                <button class="control-btn" onclick="startReactionTest()">B·∫Øt ƒë·∫ßu</button>
            </div>
        </div>
    </div>

    <!-- Quiz Game -->
    <div id="quiz-game" class="game-screen">
        <button class="back-btn" onclick="closeGame()">‚Üê Quay l·∫°i</button>
        <div class="game-content">
            <h2>ü§î Quick Quiz</h2>
            <div class="score">ƒêi·ªÉm: <span id="quiz-score">0</span> | C√¢u: <span id="quiz-current">1</span>/10</div>
            <div id="quiz-question" class="quiz-question"></div>
            <div id="quiz-options" class="quiz-options"></div>
            <div class="game-controls">
                <button class="control-btn" onclick="resetQuizGame()">Ch∆°i l·∫°i</button>
            </div>
        </div>
    </div>

    <!-- Cookie Clicker -->
    <div id="clicker-game" class="game-screen">
        <button class="back-btn" onclick="closeGame()">‚Üê Quay l·∫°i</button>
        <div class="game-content">
            <h2>üëÜ Cookie Clicker</h2>
            <div class="score">ƒêi·ªÉm: <span id="clicker-score">0</span> | Th·ªùi gian: <span id="clicker-time">30</span>s</div>
            <div id="clicker-area" class="reaction-area" onclick="handleClickerClick()" style="background: #f39c12;">
                üç™ CLICK ME!
            </div>
            <div class="game-controls">
                <button class="control-btn" onclick="startClickerGame()">B·∫Øt ƒë·∫ßu (30s)</button>
            </div>
        </div>
    </div>

    <!-- Math Challenge -->
    <div id="math-game" class="game-screen">
        <button class="back-btn" onclick="closeGame()">‚Üê Quay l·∫°i</button>
        <div class="game-content">
            <h2>üî¢ Math Challenge</h2>
            <div class="score">ƒêi·ªÉm: <span id="math-score">0</span> | Th·ªùi gian: <span id="math-time">60</span>s</div>
            <div id="math-question" class="quiz-question"></div>
            <div id="math-options" class="quiz-options"></div>
            <div class="game-controls">
                <button class="control-btn" onclick="startMathGame()">B·∫Øt ƒë·∫ßu</button>
            </div>
        </div>
    </div>

    <script>
        // Game management
        let currentGame = null;

        function openGame(gameName) {
            currentGame = gameName;
            document.getElementById(gameName + '-game').style.display = 'block';
            
            switch(gameName) {
                case 'snake': initSnakeGame(); break;
                case 'memory': initMemoryGame(); break;
                case 'reaction': resetReactionTest(); break;
                case 'quiz': initQuizGame(); break;
                case 'clicker': resetClickerGame(); break;
                case 'math': resetMathGame(); break;
            }
        }

        function closeGame() {
            if (currentGame) {
                document.getElementById(currentGame + '-game').style.display = 'none';
                currentGame = null;
            }
        }

        // Snake Game
        let snake, food, dx, dy, score;
        let snakeCanvas, snakeCtx;

        function initSnakeGame() {
            snakeCanvas = document.getElementById('snake-canvas');
            snakeCtx = snakeCanvas.getContext('2d');
            resetSnakeGame();
            gameLoop();
        }

        function resetSnakeGame() {
            snake = [{x: 200, y: 200}];
            food = {x: 100, y: 100};
            dx = 0;
            dy = 0;
            score = 0;
            document.getElementById('snake-score').textContent = score;
        }

        function gameLoop() {
            if (currentGame !== 'snake') return;
            
            // Move snake
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            
            // Check wall collision
            if (head.x < 0 || head.x >= 400 || head.y < 0 || head.y >= 400) {
                alert('Game Over! ƒêi·ªÉm: ' + score);
                resetSnakeGame();
            }
            
            // Check self collision
            for (let segment of snake) {
                if (head.x === segment.x && head.y === segment.y) {
                    alert('Game Over! ƒêi·ªÉm: ' + score);
                    resetSnakeGame();
                }
            }
            
            snake.unshift(head);
            
            // Check food collision
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                document.getElementById('snake-score').textContent = score;
                food = {
                    x: Math.floor(Math.random() * 20) * 20,
                    y: Math.floor(Math.random() * 20) * 20
                };
            } else {
                snake.pop();
            }
            
            // Draw
            snakeCtx.clearRect(0, 0, 400, 400);
            
            // Draw snake
            snakeCtx.fillStyle = '#27ae60';
            for (let segment of snake) {
                snakeCtx.fillRect(segment.x, segment.y, 20, 20);
            }
            
            // Draw food
            snakeCtx.fillStyle = '#e74c3c';
            snakeCtx.fillRect(food.x, food.y, 20, 20);
            
            setTimeout(gameLoop, 150);
        }

        // Snake controls
        document.addEventListener('keydown', (e) => {
            if (currentGame !== 'snake') return;
            
            switch(e.key) {
                case 'ArrowUp': if (dy === 0) { dx = 0; dy = -20; } break;
                case 'ArrowDown': if (dy === 0) { dx = 0; dy = 20; } break;
                case 'ArrowLeft': if (dx === 0) { dx = -20; dy = 0; } break;
                case 'ArrowRight': if (dx === 0) { dx = 20; dy = 0; } break;
            }
        });

        // Memory Game
        let memoryCards = [];
        let flippedCards = [];
        let memoryScore = 0;
        let memoryMoves = 0;

        function initMemoryGame() {
            resetMemoryGame();
        }

        function resetMemoryGame() {
            memoryScore = 0;
            memoryMoves = 0;
            flippedCards = [];
            
            const symbols = ['üéà', 'üé®', 'üé≠', 'üé™', 'üéØ', 'üé≤', 'üé∏', 'üé∫'];
            memoryCards = [...symbols, ...symbols].sort(() => Math.random() - 0.5);
            
            const grid = document.getElementById('memory-grid');
            grid.innerHTML = '';
            
            memoryCards.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.index = index;
                card.dataset.symbol = symbol;
                card.textContent = '?';
                card.onclick = () => flipCard(index);
                grid.appendChild(card);
            });
            
            updateMemoryScore();
        }

        function flipCard(index) {
            if (flippedCards.length >= 2) return;
            
            const card = document.querySelector(`[data-index="${index}"]`);
            if (card.classList.contains('flipped')) return;
            
            card.classList.add('flipped');
            card.textContent = card.dataset.symbol;
            flippedCards.push(index);
            
            if (flippedCards.length === 2) {
                memoryMoves++;
                updateMemoryScore();
                
                setTimeout(() => {
                    const [first, second] = flippedCards;
                    const firstCard = document.querySelector(`[data-index="${first}"]`);
                    const secondCard = document.querySelector(`[data-index="${second}"]`);
                    
                    if (memoryCards[first] === memoryCards[second]) {
                        memoryScore += 10;
                        updateMemoryScore();
                        
                        if (document.querySelectorAll('.memory-card.flipped').length === 16) {
                            setTimeout(() => alert('Ch√∫c m·ª´ng! Ho√†n th√†nh v·ªõi ' + memoryMoves + ' l∆∞·ª£t!'), 100);
                        }
                    } else {
                        firstCard.classList.remove('flipped');
                        secondCard.classList.remove('flipped');
                        firstCard.textContent = '?';
                        secondCard.textContent = '?';
                    }
                    
                    flippedCards = [];
                }, 1000);
            }
        }

        function updateMemoryScore() {
            document.getElementById('memory-score').textContent = memoryScore;
            document.getElementById('memory-moves').textContent = memoryMoves;
        }

        // Reaction Test
        let reactionStartTime;
        let reactionTimeout;
        let reactionState = 'ready'; // ready, waiting, go

        function resetReactionTest() {
            reactionState = 'ready';
            document.getElementById('reaction-area').textContent = 'Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ ch∆°i';
            document.getElementById('reaction-area').className = 'reaction-area';
            document.getElementById('reaction-time').textContent = '-';
        }

        function startReactionTest() {
            reactionState = 'waiting';
            document.getElementById('reaction-area').textContent = 'Ch·ªù m√†u xanh...';
            document.getElementById('reaction-area').className = 'reaction-area ready';
            
            reactionTimeout = setTimeout(() => {
                reactionState = 'go';
                reactionStartTime = Date.now();
                document.getElementById('reaction-area').textContent = 'CLICK NGAY!';
                document.getElementById('reaction-area').className = 'reaction-area go';
            }, Math.random() * 3000 + 1000);
        }

        function handleReactionClick() {
            if (reactionState === 'waiting') {
                clearTimeout(reactionTimeout);
                document.getElementById('reaction-area').textContent = 'Qu√° s·ªõm! Th·ª≠ l·∫°i';
                document.getElementById('reaction-area').className = 'reaction-area';
                reactionState = 'ready';
            } else if (reactionState === 'go') {
                const reactionTime = Date.now() - reactionStartTime;
                document.getElementById('reaction-time').textContent = reactionTime;
                document.getElementById('reaction-area').textContent = 'Th·ªùi gian: ' + reactionTime + 'ms';
                document.getElementById('reaction-area').className = 'reaction-area';
                reactionState = 'ready';
            }
        }

        // Quiz Game
        let quizQuestions = [
            {q: 'Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?', options: ['H√† N·ªôi', 'TP.HCM', 'ƒê√† N·∫µng', 'Hu·∫ø'], correct: 0},
            {q: '2 + 2 = ?', options: ['3', '4', '5', '6'], correct: 1},
            {q: 'H√†nh tinh n√†o g·∫ßn M·∫∑t tr·ªùi nh·∫•t?', options: ['Sao Kim', 'Sao Th·ªßy', 'Tr√°i ƒê·∫•t', 'Sao H·ªèa'], correct: 1},
            {q: 'Con v·∫≠t n√†o l√† bi·ªÉu t∆∞·ª£ng c·ªßa Vi·ªát Nam?', options: ['R·ªìng', 'H·ªï', 'Ph∆∞·ª£ng', 'R√πa'], correct: 0},
            {q: 'C√≥ bao nhi√™u ng√†y trong nƒÉm nhu·∫≠n?', options: ['365', '366', '364', '367'], correct: 1},
            {q: 'M√†u n√†o t·∫°o th√†nh t·ª´ ƒë·ªè + v√†ng?', options: ['T√≠m', 'Xanh', 'Cam', 'H·ªìng'], correct: 2},
            {q: 'ƒê·ªông v·∫≠t n√†o bay ƒë∆∞·ª£c?', options: ['C√°', 'Chim', 'R·∫Øn', '·∫æch'], correct: 1},
            {q: '10 x 5 = ?', options: ['45', '50', '55', '60'], correct: 1},
            {q: 'M√πa n√†o c√≥ l√° v√†ng r·ª•ng?', options: ['Xu√¢n', 'H·∫°', 'Thu', 'ƒê√¥ng'], correct: 2},
            {q: 'Ai ph√°t minh ra b√≥ng ƒë√®n?', options: ['Newton', 'Einstein', 'Edison', 'Tesla'], correct: 2}
        ];
        
        let currentQuiz = 0;
        let quizScore = 0;

        function initQuizGame() {
            resetQuizGame();
        }

        function resetQuizGame() {
            currentQuiz = 0;
            quizScore = 0;
            quizQuestions = quizQuestions.sort(() => Math.random() - 0.5);
            updateQuizDisplay();
        }

        function updateQuizDisplay() {
            document.getElementById('quiz-score').textContent = quizScore;
            document.getElementById('quiz-current').textContent = currentQuiz + 1;
            
            if (currentQuiz >= quizQuestions.length) {
                document.getElementById('quiz-question').textContent = 'Ho√†n th√†nh! ƒêi·ªÉm: ' + quizScore + '/10';
                document.getElementById('quiz-options').innerHTML = '';
                return;
            }
            
            const question = quizQuestions[currentQuiz];
            document.getElementById('quiz-question').textContent = question.q;
            
            const optionsDiv = document.getElementById('quiz-options');
            optionsDiv.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => selectQuizAnswer(index);
                optionsDiv.appendChild(btn);
            });
        }

        function selectQuizAnswer(selected) {
            const correct = quizQuestions[currentQuiz].correct;
            const options = document.querySelectorAll('.quiz-option');
            
            options[selected].classList.add(selected === correct ? 'correct' : 'wrong');
            options[correct].classList.add('correct');
            
            if (selected === correct) quizScore++;
            
            setTimeout(() => {
                currentQuiz++;
                updateQuizDisplay();
            }, 1500);
        }

        // Cookie Clicker
        let clickerScore = 0;
        let clickerTime = 30;
        let clickerActive = false;
        let clickerInterval;

        function resetClickerGame() {
            clickerScore = 0;
            clickerTime = 30;
            clickerActive = false;
            document.getElementById('clicker-score').textContent = clickerScore;
            document.getElementById('clicker-time').textContent = clickerTime;
        }

        function startClickerGame() {
            if (clickerActive) return;
            
            clickerActive = true;
            clickerScore = 0;
            clickerTime = 30;
            
            clickerInterval = setInterval(() => {
                clickerTime--;
                document.getElementById('clicker-time').textContent = clickerTime;
                
                if (clickerTime <= 0) {
                    clearInterval(clickerInterval);
                    clickerActive = false;
                    alert('H·∫øt th·ªùi gian! ƒêi·ªÉm: ' + clickerScore);
                }
            }, 1000);
        }

        function handleClickerClick() {
            if (!clickerActive) return;
            
            clickerScore++;
            document.getElementById('clicker-score').textContent = clickerScore;
            
            // Animation effect
            const area = document.getElementById('clicker-area');
            area.classList.add('bounce');
            setTimeout(() => area.classList.remove('bounce'), 1000);
        }

        // Math Challenge
        let mathScore = 0;
        let mathTime = 60;
        let mathActive = false;
        let mathInterval;
        let currentMathAnswer;

        function resetMathGame() {
            mathScore = 0;
            mathTime = 60;
            mathActive = false;
            document.getElementById('math-score').textContent = mathScore;
            document.getElementById('math-time').textContent = mathTime;
            document.getElementById('math-question').textContent = 'Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ ch∆°i';
            document.getElementById('math-options').innerHTML = '';
        }

        function startMathGame() {
            if (mathActive) return;
            
            mathActive = true;
            mathScore = 0;
            mathTime = 60;
            
            mathInterval = setInterval(() => {
                mathTime--;
                document.getElementById('math-time').textContent = mathTime;
                
                if (mathTime <= 0) {
                    clearInterval(mathInterval);
                    mathActive = false;
                    alert('H·∫øt th·ªùi gian! ƒêi·ªÉm: ' + mathScore);
                    resetMathGame();
                }
            }, 1000);
            
            generateMathQuestion();
        }

        function generateMathQuestion() {
            if (!mathActive) return;
            
            const a = Math.floor(Math.random() * 20) + 1;
            const b = Math.floor(Math.random() * 20) + 1;
            const operations = ['+', '-', '√ó'];
            const op = operations[Math.floor(Math.random() * operations.length)];
            
            let question, answer;
            switch(op) {
                case '+': question = `${a} + ${b}`; answer = a + b; break;
                case '-': question = `${a} - ${b}`; answer = a - b; break;
                case '√ó': question = `${a} √ó ${b}`; answer = a * b; break;
            }
            
            currentMathAnswer = answer;
            document.getElementById('math-question').textContent = `${question} = ?`;
            
            // Generate options
            const options = [answer];
            while (options.length < 4) {
                const wrong = answer + Math.floor(Math.random() * 20) - 10;
                if (wrong !== answer && !options.includes(wrong)) {
                    options.push(wrong);
                }
            }
            options.sort(() => Math.random() - 0.5);
            
            const optionsDiv = document.getElementById('math-options');
            optionsDiv.innerHTML = '';
            
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => selectMathAnswer(option);
                optionsDiv.appendChild(btn);
            });
        }

        function selectMathAnswer(selected) {
            if (!mathActive) return;
            
            const options = document.querySelectorAll('#math-options .quiz-option